<!DOCTYPE html>
<html>
<head>
  <title>GroupBooks</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
  <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
  <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
  <script src="//code.jquery.com/jquery-2.1.3.min.js"></script>
  <script src="https://js.pusher.com/3.0/pusher.min.js"></script>
  <script>
    // Enable pusher logging - don't include this in production
    Pusher.log = function(message) {
      if (window.console && window.console.log) {
        window.console.log(message);
      }
    };

    var pusher = new Pusher('29b6be3ff7a1ec4e6c93', {
      cluster: 'eu',
      encrypted: true
    });

    var channel = pusher.subscribe('test_channel');
    channel.bind('my_event', function(data) {
      alert(data.message);
    });
  </script>
  <%= csrf_meta_tags %>
</head>
<body>
  <div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        
        <a class="brand" href="#">
          GroupBooks.
        </a>
        <ul class="nav">
          <li><%= link_to "All Statuses", feed_path %></li>
          <span class="glyphicon glyphicon-log-in" id="logIcon"></span>
          
        </ul>
        <ul class="nav pull-right">
          <% if user_signed_in? %>
            <li><%= link_to current_user.full_name, profile_path(current_user) %></li>
            <li><%= link_to "Log Out", logout_path %></li>
            <li><%= link_to "Notifications", profile_path(current_user) %></li>
            <li>
  <!-- TODO : aggiungere la notifica su questa icona   -->
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-flag fa-stack-1x fa-inverse"></i>
              </span>
            </li>
          <% else %>
            <li><%= link_to "Register", register_path %></li>
            <li><%= link_to "Log In", login_path %></li>
          <% end %>
        </ul>
        
      </div>
    </div>
  </div>
  
  <div class="container">
    
    <% if flash[:notice] %>
      <div class="alert alert-info">
        <button class="close" data-dismiss="alert">x</button>
        <%= flash[:notice] %>
      </div>
    <% end %>
    
    <% if flash[:success] %>
      <div class="alert alert-success">
        <button class="close" data-dismiss="alert">x</button>
        <%= flash[:success] %>
      </div>
    <% end %>
    
    <% if flash[:alert] %>
      <div class="alert alert-error">
        <button class="close" data-dismiss="alert">x</button>
        <%= flash[:alert] %>
      </div>
    <% end %>
    
    <%= yield %>

  </div>
</body>
</html>
